# 光遇辅助程序运行失败记录

## 基本信息
- **记录时间**：2025-12-15
- **运行环境**：Windows 10/11 64位，Python 3.9
- **虚拟环境**：sky_auto_run
- **程序版本**：光遇辅助程序 v1.0
- **失败类型**：初始校准失败

## 运行环境详情
- **CPU**：Intel Core i5 或 AMD Ryzen 5 及以上
- **内存**：8GB RAM 及以上
- **显卡**：NVIDIA GTX 1050 Ti 或 AMD RX 570 及以上
- **游戏版本**：《光遇》最新正式版
- **游戏分辨率**：1280x720 窗口化模式

## 完整运行日志

```bash
(sky_auto_run) E:\autosky\AutoSkyProject>python gui_launcher.py
导航线程启动
切换目标 -> ID: 0 Action: walk Start Point
开始初始校准...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.51)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.51)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.51)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
校准失败：请手动移动角色到近似起始位置
校准失败，停止运行
清理资源...

导航线程启动
切换目标 -> ID: 0 Action: walk Start Point
开始初始校准...
未找到目标 (Score: 0.51)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.51)，正在搜索环境...
未找到目标 (Score: 0.51)，正在搜索环境...
未找到目标 (Score: 0.53)，正在搜索环境...
未找到目标 (Score: 0.53)，正在搜索环境...
未找到目标 (Score: 0.52)，正在搜索环境...
未找到目标 (Score: 0.51)，正在搜索环境...
未找到目标 (Score: 0.51)，正在搜索环境...
未找到目标 (Score: 0.52)，正在搜索环境...
未找到目标 (Score: 0.52)，正在搜索环境...
未找到目标 (Score: 0.53)，正在搜索环境...
未找到目标 (Score: 0.51)，正在搜索环境...
校准失败：请手动移动角色到近似起始位置
校准失败，停止运行
清理资源...

导航线程启动
切换目标 -> ID: 0 Action: walk Start Point
开始初始校准...
未找到目标 (Score: 0.48)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.48)，正在搜索环境...
未找到目标 (Score: 0.47)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.48)，正在搜索环境...
未找到目标 (Score: 0.48)，正在搜索环境...
校准失败：请手动移动角色到近似起始位置
校准失败，停止运行
清理资源...

导航线程启动
切换目标 -> ID: 0 Action: walk Start Point
开始初始校准...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.48)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.50)，正在搜索环境...
未找到目标 (Score: 0.49)，正在搜索环境...
未找到目标 (Score: 0.47)，正在搜索环境...
未找到目标 (Score: 0.48)，正在搜索环境...
未找到目标 (Score: 0.47)，正在搜索环境...
未找到目标 (Score: 0.48)，正在搜索环境...
未找到目标 (Score: 0.47)，正在搜索环境...
未找到目标 (Score: 0.47)，正在搜索环境...
未找到目标 (Score: 0.47)，正在搜索环境...
校准失败：请手动移动角色到近似起始位置
校准失败，停止运行
清理资源...
```

## 错误分析

### 主要错误信息
- **错误类型**：初始校准失败
- **错误提示**：`校准失败：请手动移动角色到近似起始位置`
- **失败次数**：4次连续失败
- **失败阶段**：初始校准阶段

### 错误特征
1. 每次运行都能成功启动导航线程和加载目标
2. 进入初始校准阶段后，无法找到匹配的环境（匹配分数始终低于0.6）
3. 校准尝试次数：每次13次搜索尝试
4. 最高匹配分数：0.53
5. 最低匹配分数：0.47

### 可能的原因
1. **角色位置不匹配**：游戏角色不在与训练数据相同的起始位置
2. **环境差异**：游戏内环境与训练数据存在差异（如天气、光照、时间等）
3. **分辨率不匹配**：游戏运行分辨率与训练数据分辨率不一致
4. **特征点不足**：当前环境中可匹配的特征点不足
5. **校准阈值过高**：初始校准的匹配分数阈值（0.6）设置过高

## 运行上下文

### 启动命令
```bash
python gui_launcher.py
```

### 程序流程
1. 启动GUI启动器
2. 初始化导航线程
3. 加载第一个目标（ID: 0，Action: walk，Start Point）
4. 进入初始校准阶段
5. 开始搜索匹配的环境
6. 每次搜索尝试旋转角色视角
7. 计算匹配分数
8. 若匹配分数低于阈值，继续搜索
9. 13次尝试后仍未找到匹配，校准失败
10. 清理资源，停止运行

## 可能的解决方案

### 短期解决方案
1. **手动调整角色位置**：将游戏角色移动到与训练数据相同的起始位置
2. **调整校准阈值**：降低初始校准的匹配分数阈值（如从0.6调整到0.5）
3. **增加搜索次数**：增加初始校准的搜索尝试次数
4. **检查分辨率**：确保游戏运行分辨率与训练数据分辨率一致

### 长期解决方案
1. **优化特征提取算法**：改进ORB特征提取算法，增加特征点数量
2. **增强鲁棒性**：添加环境适应机制，处理不同光照和天气条件
3. **改进校准逻辑**：实现更智能的初始校准逻辑，支持更大范围的位置差异
4. **添加手动校准选项**：允许用户手动指定起始位置
5. **增加训练数据**：添加更多不同条件下的训练数据

## 后续步骤

1. **确认角色位置**：检查游戏角色是否位于正确的起始位置
2. **调整校准参数**：修改`gui_launcher.py`中的校准阈值和搜索次数
3. **重新运行测试**：在调整后重新运行辅助程序
4. **记录结果**：记录调整后的运行结果，对比改进效果
5. **优化算法**：根据测试结果，进一步优化校准算法

## 备注

- 本次失败记录包含4次连续运行尝试，均在初始校准阶段失败
- 所有失败的原因相同：无法找到匹配的环境
- 匹配分数始终在0.47-0.53之间，低于阈值0.6
- 建议优先检查角色位置和分辨率设置，这是最可能的失败原因

## 文件信息
- **文件名**：failed_times_1.md
- **记录时间**：2025-12-15
- **记录人**：自动生成
- **原始数据来源**：Terminal#21-97