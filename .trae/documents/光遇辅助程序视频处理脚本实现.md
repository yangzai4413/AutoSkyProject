# 光遇辅助程序视频处理脚本实现

## 实现目标
将连续的视频流转化为机器可以理解的离散导航路点（Waypoints）数据库，用于后续的视觉分析和路径跟随。所有操作均在conda虚拟环境"sky_auto_run"中执行。

## 核心功能
1. **视频分辨率调整**：将输入视频缩放到640x360，提高处理速度并减少噪点
2. **遮罩策略实现**：遮挡游戏UI、主角等干扰元素，只保留有效视觉信息
3. **智能关键帧提取**：根据画面变化自动提取关键帧，生成导航路点

## 实现步骤
1. **安装缺失依赖**：在sky_auto_run虚拟环境中安装scikit-image
2. **创建主脚本文件**：`video_processor.py`，包含所有核心功能
3. **实现视频格式转换函数**：将视频缩放至目标分辨率
4. **实现遮罩函数**：根据晨岛场景特点，遮挡UI和主角
5. **实现智能关键帧提取算法**：使用结构相似性指数(SSIM)判断画面变化，自动提取关键帧
6. **创建输出目录结构**：用于存储处理后的关键帧

## 技术细节
- 使用OpenCV进行视频处理和图像操作
- 使用Scikit-Image计算结构相似性指数(SSIM)，提高画面变化判断准确性
- 采用模块化设计，各功能模块独立，便于后续扩展和优化
- 支持命令行参数，方便用户调整处理参数

## 预期输出
- 处理后的关键帧图像序列，存储在指定目录中
- 关键帧提取日志，包含提取时间和帧信息
- 便于后续手动标注的关键帧数据集

## 后续工作
- 手动标注关键帧，添加动作指令和路径信息
- 实现视觉匹配和路径跟随算法
- 整合为完整的游戏辅助程序

## 环境要求
- 所有操作均在conda虚拟环境"sky_auto_run"中执行
- 依赖包：opencv-python, numpy, scikit-image, pillow

## 执行流程
1. 激活虚拟环境：`conda activate sky_auto_run`
2. 安装依赖：`pip install scikit-image`
3. 运行脚本：`python video_processor.py --input Isle_of_Dawn.mp4 --output dataset/isle_dawn`